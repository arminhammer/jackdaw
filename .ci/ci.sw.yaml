document:
  dsl: '1.0.2'
  namespace: ci
  name: jackdaw-ci
  version: '1.0.0'
  description: 'CI pipeline for jackdaw - leveraging jackdaw itself for CI execution'

use:
  catalogs:
    local:
      endpoint:
        uri: file://./.ci/catalog

do:
  # Step 0: Log runtime and workflow info (test descriptors)
  - logRuntimeInfo:
      run:
        script:
          language: python
          arguments:
            - ${ $workflow.id }
            - ${ $workflow.name }
            - Foo
            - Bar
          code: |
            import sys
            from time import sleep
            print("Starting script...\n")
            sleep(2)
            print(sys.argv)
            sleep(5)
            print("\nrunning\n")
            for arg in sys.argv[1:]:
                print(f"ARG: {arg}\n")
                sleep(2)            
            print("done\n")